services:
  - name: logger
    class: Unto::Essex::StderrLogService
    factory: Unto::Essex::SingletonFactory
  - name: dispatcher
    class: Unto::Essex::RestDispatcher
    singleton: true
  - name: template
    class: Unto::Essex::TemplateToolkitService
    pool-max: 50
  - name: cache
    class: Unto::Essex::CacheService
  - name: springboard
    class: Unto::Spring::SpringBoard
  - name: amazon
    class: Unto::Spring::AmazonService
  - name: yahoo
    class: Unto::Spring::YahooService
  - name: google
    class: Unto::Spring::GoogleService
  - name: site-info
    class: Unto::Spring::SiteInfoService
    singleton: true;
  - name: url
    class: Unto::Essex::UrlService
  - name: xslt
    class: Unto::Essex::XsltService
  - name: search
    class: Unto::Spring::SearchService
  - name: msn
    class: Unto::Spring::MsnService

dispatcher:
  dispatchers:
    - path: /
      service: springboard
      description: Load the primary start page for Spring
      get-handler: get_springboard_html
    - path: /search/[service]/[searchTerms?]/[startPage?]/
      service: search
      description: >
        Search the specified service for the search terms and return
        the results in the specified format.  Service must be
        one of 'msn', 'google', or 'yahoo'.
      get-handler: handle_get
    - path: /opensearchdescriptions/
      service: springboard
      description: Return a list of all available OpenSearch Description Documents
      get-handler: get_opensearch_descriptions
    - path: /api/
      service: site-info
      get-handler: get_api_html
      description: Return this list of web service API calls
#    - path: /amazon/product/opensearchdescription/[searchIndex?]
#      service: amazon
#      get-handler: get_product_opensearch_description
#      description: Discover or retrieve OpenSearch Description Documents for Amazon product searches
#    - path: /amazon/product/xml/[searchIndex]/[searchTerms]/[startPage?]
#      service: amazon
#      get-handler: get_product_xml
#      description: Fetch Amazon Web Services XML results for a product search
#    - path: /amazon/product/opensearch/[searchIndex]/[searchTerms]/[startPage?]
#      service: amazon
#      get-handler: get_product_opensearch
#      description: Fetch OpenSearch RSS results for a product search on Amazon
#    - path: /amazon/product/html/[searchIndex]/[searchTerms]/[startPage?]
#      service: amazon
#      get-handler: get_product_html
#      description: Fetch HTML results for a product search on Amazon
#    - path: /yahoo/web/opensearchdescription/
#      service: yahoo
#      get-handler: get_web_opensearch_description
#      description: Fetch an OpenSearch Description Document for a Yahoo web search  
#    - path: /yahoo/product/opensearchdescription/
#      service: yahoo
#      get-handler: get_product_opensearch_description
#      description: Fetch an OpenSearch Description Document for a Yahoo product search  
#    - path: /yahoo/web/xml/[searchTerms]/[startPage?]
#      service: yahoo
#      get-handler: get_web_xml
#      description: Fetch Yahoo Web Services XML for a web search
#    - path: /yahoo/web/opensearch/[searchTerms]/[startPage?]
#      service: yahoo
#      get-handler: get_web_opensearch
#      description: Fetch OpenSearch RSS results for a web search on Yahoo
#    - path: /yahoo/web/html/[searchTerms]/[startPage?]
#      service: yahoo
#      get-handler: get_web_html
#      description: Fetch HTML results for a web search on Yahoo
#    - path: /yahoo/product/xml/[searchTerms]/[startPage?]
#      service: yahoo
#      get-handler: get_product_xml
#      description: Fetch Yahoo Web Services XML for a web search
#    - path: /yahoo/product/opensearch/[searchTerms]/[startPage?]
#      service: yahoo
#      get-handler: get_product_opensearch
#      description: Fetch OpenSearch RSS results for a web search on Yahoo


site-info:
  site-name: @SiteName@
  project-root: @ProjectRoot@
  project-name: @ProjectName@

cache:
  namespace: spring-amazon
  default_expires_in: 1 hour

url:
  useragent: Spring (http://www.unto.net/spring/)
  timeout: 10

template:
  basedir: @ProjectRoot@/templates
  compile-dir: /tmp/template-toolkit/

amazon:
  site-name: @SiteName@
  search-indexes:
    Apparel:
      description: Apparel
      sample: Levis
      date-sort: -launch-date
    Baby:
      description: Baby Gear
      sample: Crib
    Beauty:
      description: Beauty
      sample: Soap
      date-sort: -launch-date
    Blended:
      description: All Products
      sample: Samsung E315
    Books:
      description: Books
      sample: Harry Potter
      date-sort: daterank
    Classical:
      description: Classical
      sample: Shostakovich
      date-sort: orig-rel-date
    PCHardware:
      description: Computers
      sample: Shure Headphones
    DigitalMusic:
      description: MP3s
      sample: Bach
      date-sort: uploaddaterank
    DVD:
      description: DVDs
      sample: The Office
      date-sort: -video-release-date
    Electronics:
      description: Electronics
      sample: ipod
    GourmetFood:
      description: Food
      sample: Fruit
      date-sort: launch-date
    HealthPersonalCare:
      description: Health
      sample: Loofa
      date-sort: launch-date
    Jewelry:
      description: Jewelry
      sample: Necklace
      date-sort: launch-date
    Kitchen:
      description: Cooking
      sample: Knife
    Magazines:
      description: Magazines
      sample: Sports Illustrated
      date-sort: daterank
    Merchants:
      description: Merchants
      sample: Gibson Les Paul
      date-sort: -launch-date
    Music:
      description: Music
      sample: Bloc Party
      date-sort: orig-rel-date
    MusicalInstruments:
      description: Instruments
      sample: Fender Strat
      date-sort: -launch-date
    OfficeProducts:
      description: Office
      sample: Moleskine
    OutdoorLiving:
      description: Outdoor
      sample: Swiss Army
    Photo:
      description: Camera Gear
      sample: Nikon D70
    Toys:
      description: Toys
      sample: Sesame Street
    Software:
      description: Software
      sample: Mac OS X Tiger
    SportingGoods:
      description: Sports
      sample: Umbro
      date-sort: launch-date
    VideoGames:
      description: Video Games
      sample: Grand Theft Auto

